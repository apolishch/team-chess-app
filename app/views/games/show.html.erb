


<script>
  $( function() {
    $( ".chess_piece span" ).draggable();
    $('.chess_piece').droppable({
      drop: function(ev, ui) {
          var dropped = ui.draggable;
          var droppedOn = $(this);
          $(dropped).detach().css({top: 0,left: 0}).appendTo(droppedOn);
          var chesspiece = chess_piece.data(x)

      $.ajax({
          type: 'PUT',
          url: '<%= piece_path(@game)%>'// <!--generate a piece path if there is a piece in the td -->
          dataType: 'json',
          data: {
            chess_piece.data(x_position)
            chess_piece.data(y_position)
          }
        })

      }
    });
  });

</script>

</br>

<h1><%= @game.game_title %></h1>

<div class="chessboard">
  <table id="chessboard_table" >
      <% 7.downto(0) do |row| %>
        <tr class= "chessboard-col">
          <% 7.downto(0) do |col| %>
              <td class="chess_piece" data-x_position="<%= row %>" data-y_position="<%= col %>">
                <span><%=@game.return_piece(col,row)%></span>
              </td>
          <% end %><!--end column-->
        </tr>
      <% end %><!--end row-->
  </table>
</div>

